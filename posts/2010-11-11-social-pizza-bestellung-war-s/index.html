<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Social Pizza-Bestellung war s… (2010) - Michael Stapelberg</title>

  <meta property="og:site_name" content="Michael Stapelberg">
  <meta property="og:title" content=" Social Pizza-Bestellung war s…">
  <meta property="og:description" content="Social Pizza-Bestellung war schon lange eine Funktionalität, die wir auf dem Chaostreff haben wollten. Das bedeutet, dass jeder am eigenen Rechner sich seine Wunschpizza klicken kann und wir dann genau eine Bestellung abschicken. Aufgrund mangelnder Computerfähigkeiten der Jungs bei (bzw.">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-48x48.png" sizes="48x48">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <meta name="description" content="Social Pizza-Bestellung war schon lange eine Funktionalität, die wir auf dem Chaostreff haben wollten. Das bedeutet, dass jeder am eigenen Rechner sich seine Wunschpizza klicken kann und wir dann genau eine Bestellung abschicken. Aufgrund mangelnder Computerfähigkeiten der Jungs bei (bzw.">
  <link rel="canonical" href="https://michael.stapelberg.ch/posts/2010-11-11-social-pizza-bestellung-war-s/">
  <meta name="author" content="Michael Stapelberg">
  <style type="text/css">
    @font-face {
	font-family: 'Roboto Mono';
	src: url('/font/subset-RobotoMono-Regular.eot');
	src: local('Roboto Mono Regular'), local('RobotoMono-Regular'),
        url('/font/subset-RobotoMono-Regular.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-RobotoMono-Regular.woff2') format('woff2'),
        url('/font/subset-RobotoMono-Regular.woff') format('woff'),
        url('/font/subset-RobotoMono-Regular.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
	font-display: swap;
    }

    @font-face {
	font-family: 'Roboto';
	src: url('/font/subset-Roboto-Bold.eot');
	src: local('Roboto Bold'), local('Roboto-Bold'),
        url('/font/subset-Roboto-Bold.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-Roboto-Bold.woff2') format('woff2'),
        url('/font/subset-Roboto-Bold.woff') format('woff'),
        url('/font/subset-Roboto-Bold.ttf') format('truetype');
	font-weight: bold;
	font-style: normal;
	font-display: swap;
    }

    @font-face {
	font-family: 'Roboto';
	src: url('/font/subset-Roboto-Regular.eot');
	src: local('Roboto'), local('Roboto-Regular'),
        url('/font/subset-Roboto-Regular.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-Roboto-Regular.woff2') format('woff2'),
        url('/font/subset-Roboto-Regular.woff') format('woff'),
        url('/font/subset-Roboto-Regular.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
	font-display: swap;
    }

    @font-face {
	font-family: 'Lato';
	src: url('/font/subset-Lato-Bold.eot');
	src: local('Lato Bold'), local('Lato-Bold'),
        url('/font/subset-Lato-Bold.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-Lato-Bold.woff2') format('woff2'),
        url('/font/subset-Lato-Bold.woff') format('woff'),
        url('/font/subset-Lato-Bold.ttf') format('truetype');
	font-weight: bold;
	font-style: normal;
	font-display: swap;
    }

    body, td, th {
	font-family: 'Roboto';
	font-size: 16px;
	line-height: 150%;
	color: #000;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
	font-family: 'Lato';
	font-weight: bold;
	font-variant-ligatures: none;
	color: #000;
    }
  </style>

  
  <link rel="preload" href="/font/subset-Lato-Bold.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/font/subset-Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin>

  

  
  <link rel="stylesheet" href="/1.min.css?cachebust=sha512-I0UgSa%2b7hYT7qK%2frOve0ZBP50owtJrFZWlIVuNrTjjerYIZ92i01Nz2OTyOq7A0%2f8N3pFbeykhg47FpofWUT%2bA%3d%3d" type="text/css">
  <link rel="alternate" href="/feed.xml" type="application/atom+xml" title="ATOM feed">
</head>
<body>



<header id="ms_navbar">
  <a href="/">
<img
    src="/logo1x.jpg"
    srcset="/logo2x.jpg 2x, /logo3x.jpg 3x"
    width="42"
    height="52"
    alt="profile picture"
    title="profile picture">
</a>
  <div>
    <a href="/"><h1>Michael Stapelberg</h1></a>
    <nav id="ms_desktopnav">
      <ul>
	
    <li><a href="/" >About</a></li>
    <li><a href="/posts/" class="active">Blog</a></li>
    <li><a href="/talks/" >Talks</a></li>
    <li><a href="/series/" >Series</a></li>

      </ul>
    </nav>
  </div>

  <div id="ms_burger_open">
    <label for="ms_burger"><svg viewBox="0 0 100 80" width="24" height="24">
	<rect width="100" height="17" rx="8" fill="white"></rect>
	<rect y="30" width="100" height="17" rx="8" fill="white"></rect>
	<rect y="60" width="100" height="17" rx="8" fill="white"></rect>
    </svg></label>
  </div>

  <input type="checkbox" id="ms_burger">

  <nav id="ms_navdrawer">
    <div id="ms_navdrawer_top">
      <div id="ms_navdrawer_search">
	<a href="/">
<img
    src="/logo1x.jpg"
    srcset="/logo2x.jpg 2x, /logo3x.jpg 3x"
    width="42"
    height="52"
    alt="profile picture"
    title="profile picture">

	<h1>Michael Stapelberg</h1></a>
      </div>
      <div id="ms_burger_close">
	<label for="ms_burger"><svg viewBox="0 0 110 110" width="24" height="24">
	    <line x1="10" y1="10" x2="100" y2="100" stroke="#047bc2" stroke-width="20" />
	    <line x1="100" y1="10" x2="10" y2="100" stroke="#047bc2" stroke-width="20" />
	</svg></label>
      </div>
    </div>

    <div id="ms_navdrawer_content">
      <ul>
	
    <li><a href="/" >About</a></li>
    <li><a href="/posts/" class="active">Blog</a></li>
    <li><a href="/talks/" >Talks</a></li>
    <li><a href="/series/" >Series</a></li>

      </ul>
    </div>
  </nav>
</header>
<main>
      <div>
<h1 class="ms_title"> Social Pizza-Bestellung war s… (2010)</h1>

<div class="ms_meta">
  <div id="ms_date">published 2010-11-11, last modified 2018-03-23</div>
  
  
  <div>
    <a href="https://github.com/stapelberg/hugo/edit/master/content/posts/2010-11-11-Social-Pizza-Bestellung-war-s.html"><img src="/Bilder/pen-square-solid.svg" width="18" height="20" alt="Edit Icon" title="Suggest a change to this article"></a>
  </div>
  
</div>
<div class="Artikel" id="content">
  <p>
Social Pizza-Bestellung war schon lange eine Funktionalität, die wir auf dem
Chaostreff haben wollten. Das bedeutet, dass jeder am eigenen Rechner sich
seine Wunschpizza klicken kann und wir dann genau eine Bestellung abschicken.
Aufgrund mangelnder Computerfähigkeiten der Jungs bei (bzw. hinter) Hallo
Pizza (Bestellungen gehen per Fax ein und werden dann abgetippt!), kommt dieses
Feature natürlich nicht.
</p>

<p>
Daher sind wir das mal selbst angegangen. Unsere Lösung besteht aus einem
Proxy-Server auf unserem Router, der Requests an hallopizza.de weiterleitet und
dabei das Cookie ersetzt. Wir haben dazu zwei vhosts: Einer mit hübschem
DNS-Namen, der dann auf den anderen mit korrekter URL weiterleitet (damit man
nicht auf der Eingangsseite landet).
</p>

<pre>
&lt;VirtualHost 172.22.37.2:80&gt;
        DocumentRoot /var/www
        &lt;Directory /&gt;
                Options FollowSymLinks
                AllowOverride None
        &lt;/Directory&gt;

        RewriteEngine on
        RewriteRule / http://172.22.37.1/bestellen/ [L]
&lt;/VirtualHost&gt;
</pre>

<p>
Der andere vhost ist dann Proxy-Server für hallopizza.de. Dabei gilt es zu
beachten, dass Antworten von hallopizza.de üblicherweise komprimiert sind
(gzip), d.h. via SetOutputFilter ausgepackt werden müssen. Anschließend
ersetzen wir die URL http://hallopizza.de/ durch http://172.22.37.1/ und fügen
ein Cookie hinzu (das holt man sich vorher von hallopizza.de, z.B. via wget):
</p>

<pre>
&lt;VirtualHost 172.22.37.1:80&gt;
        DocumentRoot /var/www
        &lt;Directory /&gt;
                Options FollowSymLinks
                AllowOverride None
        &lt;/Directory&gt;

        ProxyPass / http://hallopizza.de/
        ProxyPassReverse / http://hallopizza.de/

        AddOutputFilterByType SUBSTITUTE text/html
        Substitute "s|http://hallopizza.de|http://172.22.37.1/|in"

        SetOutputFilter INFLATE;substitute;DEFLATE
        RequestHeader set Cookie "hallopizza=blargh"
&lt;/VirtualHost&gt;
</pre>

<p>
Man sollte darauf achten, dass man nicht gleichzeitig im Warenkorb rumklickt,
hallopizza.de verträgt das nicht so gut. Wenn man das aber nacheinander macht,
funktioniert es einwandfrei.
</p>

<div id="bmc">
  <p>
    I run a blog since 2005, spreading knowledge and experience for over 20 years! :)
  </p>
  <p>
    If you want to support my work, you
    can <a href="https://www.buymeacoffee.com/stapelberg">buy me a coffee</a>.
  </p>
  <p>
    Thank you for your support! ❤️
  </p>
</div>

</div>

      </div>

    </main><div id="ms_footer">
  © 2025 Michael Stapelberg • all articles under <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons CC-BY license</a>
</div>
</body>
</html>
