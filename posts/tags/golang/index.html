<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"><title>golang - Michael Stapelberg</title>

  <meta property="og:site_name" content="Michael Stapelberg">
  <meta property="og:title" content="golang">
  <meta property="og:description" content="Michael Stapelberg’s private website, containing articles about computers and programming, mostly focused on Linux.">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-48x48.png" sizes="48x48">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <meta name="description" content="Michael Stapelberg’s private website, containing articles about computers and programming, mostly focused on Linux.">
  <link rel="canonical" href="https://michael.stapelberg.ch/posts/tags/golang/">
  <meta name="author" content="Michael Stapelberg">
  <style type="text/css">
    @font-face {
	font-family: 'Roboto Mono';
	src: url('/font/subset-RobotoMono-Regular.eot');
	src: local('Roboto Mono Regular'), local('RobotoMono-Regular'),
        url('/font/subset-RobotoMono-Regular.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-RobotoMono-Regular.woff2') format('woff2'),
        url('/font/subset-RobotoMono-Regular.woff') format('woff'),
        url('/font/subset-RobotoMono-Regular.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
	font-display: swap;
    }

    @font-face {
	font-family: 'Roboto';
	src: url('/font/subset-Roboto-Bold.eot');
	src: local('Roboto Bold'), local('Roboto-Bold'),
        url('/font/subset-Roboto-Bold.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-Roboto-Bold.woff2') format('woff2'),
        url('/font/subset-Roboto-Bold.woff') format('woff'),
        url('/font/subset-Roboto-Bold.ttf') format('truetype');
	font-weight: bold;
	font-style: normal;
	font-display: swap;
    }

    @font-face {
	font-family: 'Roboto';
	src: url('/font/subset-Roboto-Regular.eot');
	src: local('Roboto'), local('Roboto-Regular'),
        url('/font/subset-Roboto-Regular.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-Roboto-Regular.woff2') format('woff2'),
        url('/font/subset-Roboto-Regular.woff') format('woff'),
        url('/font/subset-Roboto-Regular.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
	font-display: swap;
    }

    @font-face {
	font-family: 'Lato';
	src: url('/font/subset-Lato-Bold.eot');
	src: local('Lato Bold'), local('Lato-Bold'),
        url('/font/subset-Lato-Bold.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-Lato-Bold.woff2') format('woff2'),
        url('/font/subset-Lato-Bold.woff') format('woff'),
        url('/font/subset-Lato-Bold.ttf') format('truetype');
	font-weight: bold;
	font-style: normal;
	font-display: swap;
    }

    body, td, th {
	font-family: 'Roboto';
	font-size: 16px;
	line-height: 150%;
	color: #000;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
	font-family: 'Lato';
	font-weight: bold;
	font-variant-ligatures: none;
	color: #000;
    }
  </style>

  
  <link rel="preload" href="/font/subset-Lato-Bold.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/font/subset-Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin>

  

  
  <link rel="stylesheet" href="/1.min.css?cachebust=sha512-o8DS%2fyB1wCpzQ%2bK0ZhP1Oe%2bYgeJpnbBcQPAJtAuGj0K5c8K%2bogzuLmevf4eYXK4ftvHFhOE9RU27TSg2%2fLU%2f9g%3d%3d" type="text/css">
  <link rel="alternate" href="https://michael.stapelberg.ch/posts/tags/golang/feed.xml" type="application/atom+xml" title="ATOM feed for posts tagged golang">
</head>
<body>



<header id="ms_navbar">
  <a href="/">
<img
    src="/logo1x.jpg"
    srcset="/logo2x.jpg 2x, /logo3x.jpg 3x"
    width="42"
    height="52"
    alt="profile picture"
    title="profile picture">
</a>
  <div>
    <a href="/"><h1>Michael Stapelberg</h1></a>
    <nav id="ms_desktopnav">
      <ul>
	
    <li><a href="/" >About</a></li>
    <li><a href="/posts/" class="active">Blog</a></li>
    <li><a href="/talks/" >Talks</a></li>
    <li><a href="/series/" >Series</a></li>

      </ul>
    </nav>
  </div>

  <div id="ms_burger_open">
    <label for="ms_burger"><svg viewBox="0 0 100 80" width="24" height="24">
	<rect width="100" height="17" rx="8" fill="white"></rect>
	<rect y="30" width="100" height="17" rx="8" fill="white"></rect>
	<rect y="60" width="100" height="17" rx="8" fill="white"></rect>
    </svg></label>
  </div>

  <input type="checkbox" id="ms_burger">

  <nav id="ms_navdrawer">
    <div id="ms_navdrawer_top">
      <div id="ms_navdrawer_search">
	<a href="/">
<img
    src="/logo1x.jpg"
    srcset="/logo2x.jpg 2x, /logo3x.jpg 3x"
    width="42"
    height="52"
    alt="profile picture"
    title="profile picture">

	<h1>Michael Stapelberg</h1></a>
      </div>
      <div id="ms_burger_close">
	<label for="ms_burger"><svg viewBox="0 0 110 110" width="24" height="24">
	    <line x1="10" y1="10" x2="100" y2="100" stroke="#047bc2" stroke-width="20" />
	    <line x1="100" y1="10" x2="10" y2="100" stroke="#047bc2" stroke-width="20" />
	</svg></label>
      </div>
    </div>

    <div id="ms_navdrawer_content">
      <ul>
	
    <li><a href="/" >About</a></li>
    <li><a href="/posts/" class="active">Blog</a></li>
    <li><a href="/talks/" >Talks</a></li>
    <li><a href="/series/" >Series</a></li>

      </ul>
    </div>
  </nav>
</header>
<main>
      <div>
<h1 class="ms_title">Blog Posts tagged golang
  <a href="https://michael.stapelberg.ch/posts/tags/golang/feed.xml">
    <img src="/feed-icon.svg" style="width: .75em"
	 alt="ATOM feed for posts tagged golang"
	 title="ATOM feed for posts tagged golang">
  </a>
</h1>

<div class="Artikel" id="content">
  <p>
  Go is <a href="/posts/2017-08-19-golang_favorite/">my favorite programming language</a>.
</p>

  
    
  <h2>2025 › February</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2025-02-27-debug-hanging-go-programs/"><h3>Tips to debug hanging Go programs</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	<span class="ms_tag"><a href="/posts/tags/rsync/">rsync</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	
	<a href="https://michael.stapelberg.ch/posts/2025-02-27-debug-hanging-go-programs/" style="min-width: 200px; margin-right: 1.5rem; margin-bottom: 1.5rem"><img src="https://michael.stapelberg.ch/posts/2025-02-27-debug-hanging-go-programs/2025-02-08-panicparse_hu3e0f2d5aa6180df20bb553ed5c6fa57b_1741005_200x200_fit_q75_box.jpg" width="200" height="131"/></a>
	
	<p>
	  I was helping someone get my gokrazy/rsync implementation set up to synchronize RPKI data (used for securing BGP routing infrastructure), when we discovered that with the right invocation, my rsync receiver would just hang indefinitely.
This was a quick problem to solve, but in the process, I realized that I should probably write down a few Go debugging tips I have come to appreciate over the years!
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2025-02-27-debug-hanging-go-programs/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2024 › December</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2024-12-21-go-protobuf-opaque/"><h3>Go Protobuf: The new Opaque API</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	<p>
	  I originally published this post in the Go blog, but am publishing this copy of it in my own blog as well for readers who don’t follow the Go blog. [Protocol Buffers (Protobuf) is Google&rsquo;s language-neutral data interchange format. See protobuf.
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2024-12-21-go-protobuf-opaque/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2024 › November</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2024-11-19-testing-with-go-and-postgresql-ephemeral-dbs/"><h3>Testing with Go and PostgreSQL: ephemeral DBs</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	
	<a href="https://michael.stapelberg.ch/posts/2024-11-19-testing-with-go-and-postgresql-ephemeral-dbs/" style="min-width: 200px; margin-right: 1.5rem; margin-bottom: 1.5rem"><img src="https://michael.stapelberg.ch/posts/2024-11-19-testing-with-go-and-postgresql-ephemeral-dbs/postgresql-elephant-featured_hu62d4951bd671b33ba4be0d77c8ae651f_183979_200x200_fit_box_3.png" width="194" height="200"/></a>
	
	<p>
	  Let’s say you created a Go program that stores data in PostgreSQL — you installed PostgreSQL, wrote the Go code, and everything works; great!
But after writing a test for your code, you wonder: how do you best provide PostgreSQL to your automated tests?
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2024-11-19-testing-with-go-and-postgresql-ephemeral-dbs/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2024 › October</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2024-10-22-debug-go-core-dumps-delve-export-bytes/"><h3>Debug Go core dumps with delve: export byte slices</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	
	<a href="https://michael.stapelberg.ch/posts/2024-10-22-debug-go-core-dumps-delve-export-bytes/" style="min-width: 200px; margin-right: 1.5rem; margin-bottom: 1.5rem"><img src="https://michael.stapelberg.ch/posts/2024-10-22-debug-go-core-dumps-delve-export-bytes/core-memory-featured_huc92a382266793767583fa56b2a20c9d0_1575273_200x200_fit_q75_box.jpg" width="200" height="172"/></a>
	
	<p>
	  Not all bugs can easily be reproduced — sometimes, all you have is a core dump from a crashing program, but no idea about the triggering conditions of the bug yet.
When using Go, we can use the delve debugger for core dump debugging, but I had trouble figuring out how to save byte slice contents (for example: the incoming request causing the crash) from memory into a file for further analysis, so this article walks you through how to do it.
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2024-10-22-debug-go-core-dumps-delve-export-bytes/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2023 › January</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2023-01-15-gokrazy-instance-centric-config/"><h3>gokrazy: instance-centric configuration released 🎉</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	
	<a href="https://michael.stapelberg.ch/posts/2023-01-15-gokrazy-instance-centric-config/" style="min-width: 200px; margin-right: 1.5rem; margin-bottom: 1.5rem"><img src="https://michael.stapelberg.ch/posts/2023-01-15-gokrazy-instance-centric-config/gokrazy-logo_hu981a342c5dcf1f6aaac213cb11a773e7_100942_200x200_fit_box_3.png" width="150" height="200"/></a>
	
	<p>
	  gokrazy is an appliance platform for Go programs: with just a few commands, you can deploy your Go program(s) on a Raspberry Pi or a (typically small) PC.
I’m excited to let you know that gokrazy now comes with a re-designed gok command line tool and gokrazy instance configuration mechanism!
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2023-01-15-gokrazy-instance-centric-config/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2020 › February</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2020-02-02-readiness-notifications-in-golang/"><h3>Readiness notifications in Go</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	<p>
	  When spawning a child program, for example in an integration test, it is often helpful to know when the child program is ready to receive requests.
Delaying A brittle strategy is to just add a delay (say, time.Sleep(2 * time.Second)) and hope the child program finishes initialization in that time.
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2020-02-02-readiness-notifications-in-golang/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2020 › January</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2020-01-21-initramfs-from-scratch-golang/"><h3>distri: 20x faster initramfs (initrd) from scratch</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/distri/">distri</a></span>
	
	<span class="ms_tag"><a href="/posts/tags/debian/">debian</a></span>
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	<p>
	  In case you are not yet familiar with why an initramfs (or initrd, or initial ramdisk) is typically used when starting Linux, let me quote the wikipedia definition:
“[…] initrd is a scheme for loading a temporary root file system into memory, which may be used as part of the Linux startup process […] to make preparations before the real root file system can be mounted.
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2020-01-21-initramfs-from-scratch-golang/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2019 › September</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2019-09-29-dcs-positional-turbopfor-index/"><h3>Debian Code Search: positional index, TurboPFor-compressed</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/debian/">debian</a></span>
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	<p>
	  Over the last few months, I have been developing a new index format for Debian Code Search. This required a lot of careful refactoring, re-implementation, debug tool creation and debugging.
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2019-09-29-dcs-positional-turbopfor-index/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2019 › August</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2019-08-17-introducing-distri/"><h3>distri: a Linux distribution to research fast package management</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/distri/">distri</a></span>
	
	<span class="ms_tag"><a href="/posts/tags/debian/">debian</a></span>
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	<p>
	  Over the last year or so I have worked on a research linux distribution in my spare time. It’s not a distribution for researchers (like Scientific Linux), but my personal playground project to research linux distribution development, i.e. try out fresh ideas.
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2019-08-17-introducing-distri/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2017 › October</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2017-10-22-pkg-go-upstreams/"><h3>Which VCS do Debian’s Go package upstreams use?</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/debian/">debian</a></span>
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	<p>
	  In the pkg-go team, we are currently discussing which workflows we should standardize on. One of the considerations is what goes into the “upstream” Git branch of our repositories: should it track the upstream Git repository, or should it contain orig tarball imports?
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2017-10-22-pkg-go-upstreams/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2017 › August</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2017-08-19-golang_favorite/"><h3>Why Go is my favorite programming language</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	<p>
	  I strive to respect everybody’s personal preferences, so I usually steer clear of debates about which is the best programming language, text editor or operating system.
However, recently I was asked a couple of times why I like and use a lot of Go, so here is a coherent article to fill in the blanks of my ad-hoc in-person ramblings :-).
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2017-08-19-golang_favorite/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2017 › January</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2017-01-28-golang_atomically_writing/"><h3>Atomically writing files in Go</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	<p>
	  NOTE that the documented assumptions about fsync skipping are incorrect in the code below. Prefer using the renameio package. Writing files is simple, but correctly writing files atomically in a performant way might not be as trivial as one might think.
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2017-01-28-golang_atomically_writing/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2012 › November</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2012-11-07-sigill_golang/"><h3>One reason for SIGILL with Go (golang)</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	<p>
	  After launching Debian Code Search, sometimes its index-backend processes would crash when presented with some class of queries. The queries itself did not show an interesting pattern, and in fact, it wasn’t their fault. Looking at the system’s journal, I noticed that the processes were crashing with SIGILL, the signal when an illegal instruction for the CPU is encountered: Nov 07 00:11:33 codesearch index-backend[10517]: SIGILL: illegal instruction Nov 07 00:11:33 codesearch index-backend[10517]: PC=0x42558d Interestingly, on my workstation, I could not reproduce this issue.
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2012-11-07-sigill_golang/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  
  <h2>2012 › September</h2>
  <ul class="ArticleList">
    
    <li>
      <div>
	<a href="https://michael.stapelberg.ch/posts/2012-09-27-cgo_uint32/"><h3>golang: types such as []uint32 and cgo</h3></a>
	
	<div class="tags">
	  Tags:
	
	<span class="ms_tag"><a href="/posts/tags/golang/">golang</a></span>
	
	</div>
	
      </div>
      <div class="summary">
	
	
	
	
	<p>
	  There is official documentation on the Go C language interface (or cgo in golang terminology), but the things it covers are relatively simple. I have used cgo recently in a real-world project and I want to share my experiences in this short article, that is, how to use types properly (avoiding the void* equivalent unsafe.
	  <span class="readmore"><a href="https://michael.stapelberg.ch/posts/2012-09-27-cgo_uint32/">Read more →</a></span>
	</p>
      </div>
    </li>
    
  </ul>

  

</div>

      </div>
    </main><div id="ms_footer">
  © 2025 Michael Stapelberg • all articles under <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons CC-BY license</a>
</div>
</body>
</html>
