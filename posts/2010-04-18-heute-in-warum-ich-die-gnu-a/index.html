<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Heute in „Warum ich die GNU a… (2010) - Michael Stapelberg</title>

  <meta property="og:site_name" content="Michael Stapelberg">
  <meta property="og:title" content=" Heute in „Warum ich die GNU a…">
  <meta property="og:description" content="Heute in „Warum ich die GNU autotools nicht mag”: Warum unter IRIX PHP5 nicht gelinkt werden kann. Die autotools sind eigentlich dazu da, Besonderheiten bestimmter Systeme zu ermitteln, damit man als Programmierer beispielsweise andere Funktionen nutzen kann, wenn auf einem System eine bestimmte Funktion fehlt.">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-48x48.png" sizes="48x48">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <meta name="description" content="Heute in „Warum ich die GNU autotools nicht mag”: Warum unter IRIX PHP5 nicht gelinkt werden kann. Die autotools sind eigentlich dazu da, Besonderheiten bestimmter Systeme zu ermitteln, damit man als Programmierer beispielsweise andere Funktionen nutzen kann, wenn auf einem System eine bestimmte Funktion fehlt.">
  <link rel="canonical" href="https://michael.stapelberg.ch/posts/2010-04-18-heute-in-warum-ich-die-gnu-a/">
  <meta name="author" content="Michael Stapelberg">
  <style type="text/css">
    @font-face {
	font-family: 'Roboto Mono';
	src: url('/font/subset-RobotoMono-Regular.eot');
	src: local('Roboto Mono Regular'), local('RobotoMono-Regular'),
        url('/font/subset-RobotoMono-Regular.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-RobotoMono-Regular.woff2') format('woff2'),
        url('/font/subset-RobotoMono-Regular.woff') format('woff'),
        url('/font/subset-RobotoMono-Regular.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
	font-display: swap;
    }

    @font-face {
	font-family: 'Roboto';
	src: url('/font/subset-Roboto-Bold.eot');
	src: local('Roboto Bold'), local('Roboto-Bold'),
        url('/font/subset-Roboto-Bold.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-Roboto-Bold.woff2') format('woff2'),
        url('/font/subset-Roboto-Bold.woff') format('woff'),
        url('/font/subset-Roboto-Bold.ttf') format('truetype');
	font-weight: bold;
	font-style: normal;
	font-display: swap;
    }

    @font-face {
	font-family: 'Roboto';
	src: url('/font/subset-Roboto-Regular.eot');
	src: local('Roboto'), local('Roboto-Regular'),
        url('/font/subset-Roboto-Regular.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-Roboto-Regular.woff2') format('woff2'),
        url('/font/subset-Roboto-Regular.woff') format('woff'),
        url('/font/subset-Roboto-Regular.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
	font-display: swap;
    }

    @font-face {
	font-family: 'Lato';
	src: url('/font/subset-Lato-Bold.eot');
	src: local('Lato Bold'), local('Lato-Bold'),
        url('/font/subset-Lato-Bold.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-Lato-Bold.woff2') format('woff2'),
        url('/font/subset-Lato-Bold.woff') format('woff'),
        url('/font/subset-Lato-Bold.ttf') format('truetype');
	font-weight: bold;
	font-style: normal;
	font-display: swap;
    }

    body, td, th {
	font-family: 'Roboto';
	font-size: 16px;
	line-height: 150%;
	color: #000;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
	font-family: 'Lato';
	font-weight: bold;
	font-variant-ligatures: none;
	color: #000;
    }
  </style>

  
  <link rel="preload" href="/font/subset-Lato-Bold.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/font/subset-Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin>
  
  <link rel="stylesheet" href="/1.min.css" type="text/css">
  <link rel="alternate" href="/feed.xml" type="application/atom+xml" title="ATOM feed">
</head>
<body>



<header id="ms_navbar">
  <a href="/">
<img
    src="/logo1x.jpg"
    srcset="/logo2x.jpg 2x, /logo3x.jpg 3x"
    width="42"
    height="52"
    alt="profile picture"
    title="profile picture">
</a>
  <div>
    <a href="/"><h1>Michael Stapelberg</h1></a>
    <nav id="ms_desktopnav">
      <ul>
	
    <li><a href="/" >About</a></li>
    <li><a href="/posts/" class="active">Blog</a></li>
    <li><a href="/talks/" >Talks</a></li>
    <li><a href="/series/" >Series</a></li>

      </ul>
    </nav>
  </div>

  <div id="ms_burger_open">
    <label for="ms_burger"><svg viewBox="0 0 100 80" width="24" height="24">
	<rect width="100" height="17" rx="8" fill="white"></rect>
	<rect y="30" width="100" height="17" rx="8" fill="white"></rect>
	<rect y="60" width="100" height="17" rx="8" fill="white"></rect>
    </svg></label>
  </div>

  <input type="checkbox" id="ms_burger">

  <nav id="ms_navdrawer">
    <div id="ms_navdrawer_top">
      <div id="ms_navdrawer_search">
	<a href="/">
<img
    src="/logo1x.jpg"
    srcset="/logo2x.jpg 2x, /logo3x.jpg 3x"
    width="42"
    height="52"
    alt="profile picture"
    title="profile picture">

	<h1>Michael Stapelberg</h1></a>
      </div>
      <div id="ms_burger_close">
	<label for="ms_burger"><svg viewBox="0 0 110 110" width="24" height="24">
	    <line x1="10" y1="10" x2="100" y2="100" stroke="#047bc2" stroke-width="20" />
	    <line x1="100" y1="10" x2="10" y2="100" stroke="#047bc2" stroke-width="20" />
	</svg></label>
      </div>
    </div>

    <div id="ms_navdrawer_content">
      <ul>
	
    <li><a href="/" >About</a></li>
    <li><a href="/posts/" class="active">Blog</a></li>
    <li><a href="/talks/" >Talks</a></li>
    <li><a href="/series/" >Series</a></li>

      </ul>
    </div>
  </nav>
</header>
<main>
      <div>
<h1 class="ms_title"> Heute in „Warum ich die GNU a… (2010)</h1>

<div class="ms_meta">
  <div id="ms_date">published 2010-04-18, last modified 2018-03-23</div>
  
  
  <div>
    <a href="https://github.com/stapelberg/hugo/edit/master/content/posts/2010-04-18-Heute-in-Warum-ich-die-GNU-a.html"><img src="/Bilder/pen-square-solid.svg" width="18" height="20" alt="Edit Icon" title="Suggest a change to this article"></a>
  </div>
  
</div>
<div class="Artikel" id="content">
  <p>
Heute in „Warum ich die GNU autotools nicht mag”: Warum unter IRIX PHP5 nicht
gelinkt werden kann. Die autotools sind eigentlich dazu da, Besonderheiten
bestimmter Systeme zu ermitteln, damit man als Programmierer beispielsweise
andere Funktionen nutzen kann, wenn auf einem System eine bestimmte Funktion
fehlt. Weiterhin prüfen die autotools, ob alle nötigen Libraries auf dem
System in hinreichend aktueller Version verfügbar sind und sie stellen mit
libtool ein Script bereit, mit dem man systemunabhängig shared libraries
erstellen kann.
</p>

<p>
Das Problem bei PHP5 ist nun, dass die Länge des Befehls zum Linken aufgrund
der vielen .o-Dateien so lang ist, dass libtool glaubt, den Befehl in
mehrere aufteilen zu müssen und anschließend scheitert. Aber eigentlich ist der
Befehl nicht zu lang, sondern das Makro in libtool.m4 prüft falsch. Wer sich
ein bisschen an grässlichem Code ergötzen möchte kann sich das Makro
LT_CMD_MAX_LEN <a
href="http://git.savannah.gnu.org/cgit/libtool.git/tree/libltdl/m4/libtool.m4#n1457">gerne
mal ansehen</a>. Ansonsten hier der Patch, mit dem das Problem gelöst wird:
</p>

<pre>
--- a/libltdl/m4/libtool.m4
+++ b/libltdl/m4/libtool.m4
@@ -1465,6 +1465,10 @@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [dnl
   teststring="ABCD"
 
   case $build_os in
+  irix*)
+    lt_cv_sys_max_cmd_len=`getconf ARG_MAX`
+    ;;
+
   msdosdjgpp*)
     # On DJGPP, this test can blow up pretty badly due to problems in libc
     # (any single argument exceeding 2000 bytes causes a buffer overrun
</pre>

<p>
<code>getconf</code> ist übrigens in POSIX.2, also 1992 (!) spezifiziert. Es
ist mir ein Rätsel, warum man das nicht in erster Linie verwendet. Verwendet
jemand ernsthaft noch 20 Jahre alte Systeme und denkt, er könne sich
beschweren, wenn aktuelle Software nicht mehr läuft?
</p>

<p>
Übrigens: Wenn du dein System (für ein paar Minuten?) aufhängen möchtest,
kannst du mal den Teil des LT_CMD_MAX_LEN-Makros ausführen, der für unbekannte
Systeme verwendet wird…
</p>

<div id="bmc">
  <p>
    I run a blog since 2005, spreading knowledge and experience for almost 20 years! :)
  </p>
  <p>
    If you want to support my work, you
    can <a href="https://www.buymeacoffee.com/stapelberg">buy me a coffee</a>.
  </p>
  <p>
    Thank you for your support! ❤️
  </p>
</div>

</div>

      </div>

    </main><div id="ms_footer">
  © 2024 Michael Stapelberg • all articles under <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons CC-BY license</a>
</div>
</body>
</html>
