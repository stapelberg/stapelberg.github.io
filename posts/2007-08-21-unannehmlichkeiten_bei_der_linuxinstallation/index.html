<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Unannehmlichkeiten bei der Linuxinstallation (2007) - Michael Stapelberg</title>

  <meta property="og:site_name" content="Michael Stapelberg">
  <meta property="og:title" content="Unannehmlichkeiten bei der Linuxinstallation">
  <meta property="og:description" content="Vorgeplänkel Nach 5-jährigem Einsatz Windows XP hatte ich endgültig genug von dessen Macken wenn man mehr Hardware verwendet als der Durchschnittuser (oder als vor 5 Jahren eben utopisch war): Mehr als 1 GB RAM und mehr als 1 Bildschirm und schon fangen die Probleme an (nicht genügend Resourcen trotz 1,3 GB freiem RAM sage ich nur; hab’ gar keine Lust darüber noch mehr Worte zu verlieren :-/).">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-48x48.png" sizes="48x48">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <meta name="description" content="Vorgeplänkel Nach 5-jährigem Einsatz Windows XP hatte ich endgültig genug von dessen Macken wenn man mehr Hardware verwendet als der Durchschnittuser (oder als vor 5 Jahren eben utopisch war): Mehr als 1 GB RAM und mehr als 1 Bildschirm und schon fangen die Probleme an (nicht genügend Resourcen trotz 1,3 GB freiem RAM sage ich nur; hab’ gar keine Lust darüber noch mehr Worte zu verlieren :-/).">
  <link rel="canonical" href="https://michael.stapelberg.ch/posts/2007-08-21-unannehmlichkeiten_bei_der_linuxinstallation/">
  <meta name="author" content="Michael Stapelberg">
  <style type="text/css">
    @font-face {
	font-family: 'Roboto Mono';
	src: url('/font/subset-RobotoMono-Regular.eot');
	src: local('Roboto Mono Regular'), local('RobotoMono-Regular'),
        url('/font/subset-RobotoMono-Regular.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-RobotoMono-Regular.woff2') format('woff2'),
        url('/font/subset-RobotoMono-Regular.woff') format('woff'),
        url('/font/subset-RobotoMono-Regular.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
	font-display: swap;
    }

    @font-face {
	font-family: 'Roboto';
	src: url('/font/subset-Roboto-Bold.eot');
	src: local('Roboto Bold'), local('Roboto-Bold'),
        url('/font/subset-Roboto-Bold.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-Roboto-Bold.woff2') format('woff2'),
        url('/font/subset-Roboto-Bold.woff') format('woff'),
        url('/font/subset-Roboto-Bold.ttf') format('truetype');
	font-weight: bold;
	font-style: normal;
	font-display: swap;
    }

    @font-face {
	font-family: 'Roboto';
	src: url('/font/subset-Roboto-Regular.eot');
	src: local('Roboto'), local('Roboto-Regular'),
        url('/font/subset-Roboto-Regular.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-Roboto-Regular.woff2') format('woff2'),
        url('/font/subset-Roboto-Regular.woff') format('woff'),
        url('/font/subset-Roboto-Regular.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
	font-display: swap;
    }

    @font-face {
	font-family: 'Lato';
	src: url('/font/subset-Lato-Bold.eot');
	src: local('Lato Bold'), local('Lato-Bold'),
        url('/font/subset-Lato-Bold.eot?#iefix') format('embedded-opentype'),
        url('/font/subset-Lato-Bold.woff2') format('woff2'),
        url('/font/subset-Lato-Bold.woff') format('woff'),
        url('/font/subset-Lato-Bold.ttf') format('truetype');
	font-weight: bold;
	font-style: normal;
	font-display: swap;
    }

    body, td, th {
	font-family: 'Roboto';
	font-size: 16px;
	line-height: 150%;
	color: #000;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
	font-family: 'Lato';
	font-weight: bold;
	font-variant-ligatures: none;
	color: #000;
    }
  </style>

  
  <link rel="preload" href="/font/subset-Lato-Bold.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/font/subset-Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin>
  
  <link rel="stylesheet" href="/1.min.css" type="text/css">
  <link rel="alternate" href="/feed.xml" type="application/atom+xml" title="ATOM feed">
</head>
<body>



<header id="ms_navbar">
  <a href="/">
<img
    src="/logo1x.jpg"
    srcset="/logo2x.jpg 2x, /logo3x.jpg 3x"
    width="42"
    height="52"
    alt="profile picture"
    title="profile picture">
</a>
  <div>
    <a href="/"><h1>Michael Stapelberg</h1></a>
    <nav id="ms_desktopnav">
      <ul>
	
    <li><a href="/" >About</a></li>
    <li><a href="/posts/" class="active">Blog</a></li>
    <li><a href="/talks/" >Talks</a></li>
    <li><a href="/series/" >Series</a></li>

      </ul>
    </nav>
  </div>

  <div id="ms_burger_open">
    <label for="ms_burger"><svg viewBox="0 0 100 80" width="24" height="24">
	<rect width="100" height="17" rx="8" fill="white"></rect>
	<rect y="30" width="100" height="17" rx="8" fill="white"></rect>
	<rect y="60" width="100" height="17" rx="8" fill="white"></rect>
    </svg></label>
  </div>

  <input type="checkbox" id="ms_burger">

  <nav id="ms_navdrawer">
    <div id="ms_navdrawer_top">
      <div id="ms_navdrawer_search">
	<a href="/">
<img
    src="/logo1x.jpg"
    srcset="/logo2x.jpg 2x, /logo3x.jpg 3x"
    width="42"
    height="52"
    alt="profile picture"
    title="profile picture">

	<h1>Michael Stapelberg</h1></a>
      </div>
      <div id="ms_burger_close">
	<label for="ms_burger"><svg viewBox="0 0 110 110" width="24" height="24">
	    <line x1="10" y1="10" x2="100" y2="100" stroke="#047bc2" stroke-width="20" />
	    <line x1="100" y1="10" x2="10" y2="100" stroke="#047bc2" stroke-width="20" />
	</svg></label>
      </div>
    </div>

    <div id="ms_navdrawer_content">
      <ul>
	
    <li><a href="/" >About</a></li>
    <li><a href="/posts/" class="active">Blog</a></li>
    <li><a href="/talks/" >Talks</a></li>
    <li><a href="/series/" >Series</a></li>

      </ul>
    </div>
  </nav>
</header>
<main>
      <div>
<h1 class="ms_title">Unannehmlichkeiten bei der Linuxinstallation (2007)</h1>

<div class="ms_meta">
  <div id="ms_date">published 2007-08-21, last modified 2018-03-18</div>
  
  
  <div>
    <a href="https://github.com/stapelberg/hugo/edit/master/content/posts/2007-08-21-Unannehmlichkeiten_bei_der_Linuxinstallation.markdown"><img src="/Bilder/pen-square-solid.svg" width="18" height="20" alt="Edit Icon" title="Suggest a change to this article"></a>
  </div>
  
</div>
<div class="Artikel" id="content">
  <h3>Vorgeplänkel</h3>
<p>
Nach 5-jährigem Einsatz Windows XP hatte ich endgültig genug von dessen Macken
wenn man mehr Hardware verwendet als der Durchschnittuser (oder als vor 5
Jahren eben utopisch war): Mehr als 1 GB RAM und mehr als 1 Bildschirm und
schon fangen die Probleme an (nicht genügend Resourcen trotz 1,3 GB freiem RAM
sage ich nur; hab’ gar keine Lust darüber noch mehr Worte zu verlieren :-/).
</p>
<p>
Freitags war es dann soweit. Vorausschauend nahm ich mir die nächsten Tage
nichts vor, ich hatte also Freitag, Samstag, Sonntag und die beiden Wochentage
darauf (wir hatten wegen Abiturprüfungen frei) Zeit, um mich mit der
Linuxinstallation zu befassen. Die neu für Linux angeschaffte 250
GB-SATA-Festplatte war schnell eingebaut und betriebsbereit, das BIOS machte –
wie es sich für ein einigermaßen aktuelles BIOS gehört – keinerlei Probleme.
Zusätzlich hatte ich übrigens noch zwei 74 GB-SATA-Festplatten im RAID-1 und
eine 80 GB-IDE-Platte angeschlossen.
</p>
<h3>XUbuntu Live-CD</h3>
<p>
Da ich mit Ubuntu Linux bisher eigentlich nur gute Erfahrungen gemacht habe,
entschied ich mich, auch diesmal Ubuntu zu verwenden, allerdings mit dem
abgespeckten Xfce-Desktop, da dieser ohnehin nach der Installation
Enlightenment weichen muss.
</p>
<p>
Nachdem ich mir die „Desktop”-CD geladen hatte, bemerkte ich beim Einlegen,
dass das eine Live-CD ist – das hätten die auch gleich hinschreiben können. Von
dieser sollte man jedoch auch installieren können, also nicht so schlimm. Ich
vermute, dass der Textinstaller den gleichen Bug hat, da dieser für
grub-installer filed ist…
</p>
<h3>Nichtfunktionierender Standardtreiber</h3>
<p>
Nachdem der grafische Splashscreen durchgelaufen war, schlug das Starten des
X-Servers fehl. Einen Grund dafür konnte ich auf Anhieb nicht erkennen, ich
dachte mir jedoch, dass ich es einfach mal mit einem anderen Treiber für meine
ATI x700 probieren könnte und der (proprietäre) fglrx-Treiber lief dann auch
sofort. Leider wird dieser nicht standardmäßig mitgeliefert, sodass ich zuerst
das Netzwerk konfigurieren musste und danach via <code>apt-get install
xorg-driver-fglrx</code> den Treiber nachinstallieren musste. Einmalig ist das
ja nicht so schlimm – dieser eine Start sollte aber nicht der letzte bleiben
und mit der Zeit wurde das schon ziemlich nervig.
</p>
<p>
Einfach den X-Server nun zu starten ist jedoch falsch, man muss den
<code>gdm</code> via <code>killall gdm &amp;&amp; gdm</code> beenden und
neustarten, ansonsten wird zum Beispiel das Symbol um die Installation zu
starten am Desktop nicht angezeigt. Benutzername für die Anmeldung ist
„Ubuntu”, das Passwort ist leer. Warum hier kein Auto- oder zumindest
Timed-Login verwendet wird oder wie das ein Linuxeinsteiger wissen soll, ist
mir schleierhaft.
</p>
<h3>Funktionierende Bootloader? Bei SATA nicht</h3>
<p>
SATA gibt’s schon lange genug, damit es einfach funktionieren müsste, könnte
man meinen. Gut, bei Windows XP muss man die SATA-Treiber von Diskette (!)
laden, oder direkt eine gepatchte Installations-CD erstellen, aber das ist ja
nicht (mehr) unser Maßstab.
</p>
<p>
Leider meint der <code>grub-installer</code>, dass er die erste Festplatte
nehmen müsse, die er findet, um den MBR dort zu überschreiben. Da dies aber
meine IDE-Festplatte war, landete der Bootloader also dort. Da mein BIOS nicht
ausgibt, auf welcher Festplatte es nun nach Bootloadern sucht, bemerkte ich
dies anfangs gar nicht. Was ich allerdings bemerkte: Das System ließ sich nicht
booten. Auch nach erneutem Installieren von GRUB nicht.
</p>
<p>
Auf den Rat eines Freundes hin erstelle ich dann eine separate Partition für
<code>/boot</code>, weil das BIOS eventuell Probleme mit den 250 GB haben
könnte. Das brachte mich immerhin zu einer anderen Fehlermeldung, zum starten
ließ sich GRUB allerdings nicht überreden.
</p>
<p>
Nach einigem Durchprobieren der Verfügbaren BIOS-Optionen und dem Suchen nach
einem leider nicht auffindbaren Legacy Mode (SATA-Festplatten wie IDE
darstellen), zog ich einfach das Kabel der IDE-Festplatte um dem Installer nur
noch eine Möglichkeit geben, den Bootloader zu installieren. Schon beim
Bootversuch merkte ich nun, dass das BIOS gar keinen Bootloader fand – dieser
war also wirklich nicht auf der SATA-Festplatte gelandet.
</p>
<p>
Die erneute Installation ließ mir wenigstens einen Bootloader auf der Platte,
es lag also tatsächlich daran. Für dieses Problem existiert schon seit dem
21.02.2006 <a
href="https://launchpad.net/distros/ubuntu/+source/grub-installer/+bug/32357"
title="Bugreport">ein Bugreport</a>, in der aktuellen Ubuntu-Version ist er
jedoch noch immer nicht behoben.
</p>
<h3>Das Problem</h3>
<p>
Wo nun das Problem ist? Ein MBR macht ja eigentlich nichts, kann man ja
ersetzen. Blöderweise war die besagte 80 GB-Festplatte jedoch mit einem
TrueCrypt-Volume ausgestattet und TrueCrypt legt in den ersten 512 Bytes (dort,
wo auch der Bootloader hingeschrieben wird) seine Keys ab, die er – kombiniert
mit der eigenen Passphrase natürlich – zum Einbinden des Volumes benötigt. Wenn
diese überschrieben werden, ist das Volume nicht mehr zu retten. Fast 80 GB
Daten also verloren.
</p>
<h3>GRUB, Teil Zwei</h3>
<p>
Wie vorhin kurz erwähnt, landete also schlussendlich wenigstens ein GRUB auf
der Festplatte. Dieser zeigte jedoch kein Menü an, sondern nur das Prompt.
Mittels <code>root (hd0,0)</code>, <code>kernel /vmlinuz-2.6.15-23-386 ro
root=/dev/sdc3</code> (/dev/sdc3 ist die Datenpartition), <code>initrd
/initrd.img-2.6.15-23-386</code> und <code>boot</code> konnte ich problemlos
starten.
</p>
<p>
Der Debian- beziehungsweise Ubuntuinstaller legt die menu.lst in
/boot/grub/menu.lst ab. Meine Vermutung ist nun (war bisher noch nicht
unbeschäftigt genug, um neuzustarten), dass GRUB in /boot/boot/grub/menu.lst
sucht, da er ja in der Regel eine Partition vor sich hat, wo die Dateien in
/boot liegen. Ein solches Verzeichnis gab es auch – allerdings ohne menu.lst.
Ich habe nun einen Symlink angelegt und werde berichten, ob das funktioniert.
Übrigens: Mittels <code>configfile /grub/menu.lst</code> bekommt man das Menü
auch zu sehen.
</p>
<p>
Außerdem macht der Installer aber noch einen weiteren Fehler: Er definiert die
Festplatte als hd(2,0), obwohl die zum Boot notwendigen Dateien ja auf hd(0,0)
liegen. Ob das nun mit der ohnehin falschen Reihenfolge zu tun hat, oder ein
separater Bug ist, weiß ich nicht. Jedenfalls musste ich das von Hand ändern.
</p>
<h3>Fazit</h3>
<p>
Für den etwas Hardware-ambitionierten Otto-Normal-User ist Linux also immer
noch nicht geeignet – trotz Live-CDs und tollen grafischen Installern oder auch
dem althergebrachten Textinstaller (der ja die selben Programme intern
verwendet).
</p>
<p>
Von Linux abbringen lasse ich mich dadurch jedoch nicht, dafür bietet es
einfach zu viele Vorteile. Welche das sind, darf nun gerne selbst ausprobiert
werden :-).
</p>

</div>

      </div>

    </main><div id="ms_footer">
  © 2022 Michael Stapelberg • all articles under <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons CC-BY license</a>
</div>
</body>
</html>
